---
title: "R Notebook"
output: html_notebook
---

```{r}
library(taxizedb)
library(tidyverse)
library(purrr)
```

```{r}
check_rank <- function (taxon_id) {
  if (taxid2rank(taxon_id) == 'species') {
    return(as.character(taxon_id))
  } else {
    down <- taxizedb::downstream(taxon_id, db="ncbi", downto='species', verbose=FALSE)
    down_items <- unlist(down[[as.character(taxon_id)]][['childtaxa_id']])
    return(down_items)
  }
}

taxon_ids <- user_input %>%
        strsplit(" ") %>%
        lapply(as.numeric) %>%
        unlist() %>%
        map(check_rank) %>%
        unlist() %>%
        paste(collapse = ', ')

```

